/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var m=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var C=(s,i)=>{for(var t in i)m(s,t,{get:i[t],enumerable:!0})},E=(s,i,t,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of k(i))!w.call(s,n)&&n!==t&&m(s,n,{get:()=>i[n],enumerable:!(e=S(i,n))||e.enumerable});return s};var T=s=>E(m({},"__esModule",{value:!0}),s);var L={};C(L,{default:()=>g});module.exports=T(L);var y=require("obsidian");var h={customButtons:[]};function b(){return{icon:"lucide-plus",tooltip:"\u65B0\u6309\u94AE",type:"command",command:"",file:"",url:""}}var v=require("obsidian"),c=class{constructor(i,t,e){this.app=i;this.onSettingsChange=t;this.onReorderButtons=e;this.ribbonMap=new Map;this.styleElements={};this.dragState={isDragging:!1,dragSource:null}}initVaultButtons(i){this.clearAllButtons(),this.initCustomButtons(i),this.initBuiltInButtons()}clearAllButtons(){this.ribbonMap.forEach(i=>{i&&i.parentElement&&i.remove()}),this.ribbonMap.clear()}initCustomButtons(i){i.forEach((t,e)=>{this.createCustomButton(t,e)})}initBuiltInButtons(){[{id:"theme",tooltip:"\u5207\u6362\u6DF1\u8272/\u6D45\u8272\u6A21\u5F0F",icon:"lucide-sun-moon",onClick:()=>this.switchLightDark(),draggable:!1},{id:"vault",tooltip:"\u5207\u6362\u5E93",icon:"vault",onClick:()=>this.showVaultChooser(),draggable:!1},{id:"help",tooltip:"\u5E2E\u52A9",icon:"help",onClick:()=>this.showHelp(),draggable:!1},{id:"settings",tooltip:"\u8BBE\u7F6E",icon:"lucide-settings",onClick:()=>this.showSettings(),draggable:!1}].forEach(t=>{this.createRibbonButton(t.id,t.tooltip,t.icon,t.onClick,t.draggable)})}createCustomButton(i,t){let e=`custom-${t}`,n=()=>{this.handleButtonClick(i)};return this.createRibbonButton(e,i.tooltip,i.icon,n,!0)}handleButtonClick(i){switch(i.type){case"command":i.command&&this.executeCommand(i.command);break;case"file":i.file&&this.openFile(i.file);break;case"url":i.url&&window.open(i.url,"_blank");break}}openFile(i){let t=this.app.vault.getAbstractFileByPath(i);t&&t instanceof v.TFile&&this.app.workspace.getLeaf("tab").openFile(t)}createRibbonButton(i,t,e,n,a=!1){try{let o=this.app.workspace.leftRibbon,l=o.makeRibbonItemButton(e,t,B=>{B.stopPropagation(),n()});return a&&this.makeButtonDraggable(l,i),this.ribbonMap.set(i,l),o.ribbonSettingEl.appendChild(l),l}catch(o){console.warn("Failed to create ribbon button:",o);let l=document.createElement("div");return l.style.display="none",l}}makeButtonDraggable(i,t){i.setAttribute("draggable","true"),i.classList.add("custom-ribbon-button"),i.addEventListener("dragstart",e=>{this.dragState.isDragging=!0,this.dragState.dragSource=t,i.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t)}),i.addEventListener("dragend",e=>{this.dragState.isDragging=!1,this.dragState.dragSource=null,i.classList.remove("dragging"),document.querySelectorAll(".custom-ribbon-button.drag-over").forEach(n=>{n.classList.remove("drag-over")})}),i.addEventListener("dragover",e=>{this.dragState.isDragging&&this.dragState.dragSource!==t&&(e.preventDefault(),e.dataTransfer.dropEffect="move",i.classList.add("drag-over"))}),i.addEventListener("dragenter",e=>{this.dragState.isDragging&&this.dragState.dragSource!==t&&(e.preventDefault(),i.classList.add("drag-over"))}),i.addEventListener("dragleave",e=>{i.classList.remove("drag-over")}),i.addEventListener("drop",e=>{e.preventDefault(),i.classList.remove("drag-over"),this.dragState.isDragging&&this.dragState.dragSource&&this.dragState.dragSource!==t&&this.handleReorderButtons(this.dragState.dragSource,t)})}handleReorderButtons(i,t){let e=parseInt(i.split("-")[1]),n=parseInt(t.split("-")[1]);e!==n&&this.onReorderButtons(e,n)}executeCommand(i){try{this.app.commands.executeCommandById(i)}catch(t){console.warn("Failed to execute command:",i,t)}}showVaultChooser(){try{this.app.openVaultChooser()}catch(i){console.warn("Failed to open vault chooser:",i)}}showHelp(){try{this.app.openHelp()}catch(i){console.warn("Failed to open help:",i)}}showSettings(){try{this.app.setting.open()}catch(i){console.warn("Failed to open settings:",i)}}switchLightDark(){try{this.app.vault.getConfig("theme")==="obsidian"?(this.app.setTheme("moonstone"),this.app.vault.setConfig("theme","moonstone"),this.app.workspace.trigger("css-change")):(this.app.setTheme("obsidian"),this.app.vault.setConfig("theme","obsidian"),this.app.workspace.trigger("css-change"))}catch(i){console.warn("Failed to switch theme:",i)}}applyStyleSettings(){[{id:"vault-profile",css:`
				body:not(.is-mobile) .workspace-split.mod-left-split .workspace-sidedock-vault-profile {
					display: none;
				}
			`},{id:"vault-switcher",css:`
				body:not(.is-mobile) .workspace-split.mod-left-split .workspace-sidedock-vault-profile .workspace-drawer-vault-switcher {
					display: none;
				}
			`},{id:"vault-actions-help",css:`
				body:not(.is-mobile) .workspace-split.mod-left-split .workspace-sidedock-vault-profile .workspace-drawer-vault-actions .clickable-icon:has(svg.svg-icon.help) {
					display: none;
				}
			`},{id:"vault-actions-settings",css:`
				body:not(.is-mobile) .workspace-split.mod-left-split .workspace-sidedock-vault-profile .workspace-drawer-vault-actions .clickable-icon:has(svg.svg-icon.lucide-settings) {
					display: none;
				}
			`},{id:"vault-actions-theme",css:`
				body:not(.is-mobile) .workspace-split.mod-left-split .workspace-sidedock-vault-profile .workspace-drawer-vault-actions .clickable-icon:has(svg.svg-icon.lucide-sun-moon) {
					display: none;
				}
			`}].forEach(({id:t,css:e})=>{this.updateStyle(t,e)})}updateStyle(i,t){let e=this.styleElements[i];e||(e=document.createElement("style"),e.id=i,document.head.appendChild(e),this.styleElements[i]=e),e.textContent=t}destroy(){this.clearAllButtons();for(let i in this.styleElements)this.styleElements[i].remove();this.styleElements={}}};var r=require("obsidian");var f=require("obsidian"),d=class extends f.FuzzySuggestModal{constructor(t,e){super(t);this.onChoose=e}getItems(){try{return this.app.vault.getFiles()}catch(t){return console.warn("Failed to get files:",t),[]}}getItemText(t){return t.path}onChooseItem(t,e){this.onChoose(t)}};var x=require("obsidian"),u=class extends x.FuzzySuggestModal{constructor(t,e){super(t);this.onChoose=e}getItems(){try{let t=this.app.commands.commands,e=[];for(let n in t){let a=t[n];e.push(a)}return e}catch(t){return console.warn("Failed to get commands:",t),[]}}getItemText(t){return t.name}onChooseItem(t,e){this.onChoose(t)}};var p=class extends r.PluginSettingTab{constructor(t,e){super(t,e);this.plugin=e}display(){let{containerEl:t}=this;t.empty(),this.createHeader(t),this.createDescription(t),this.plugin.settings.customButtons.length===0?this.createEmptyState(t):this.createButtonsList(t),this.createAddButton(t)}createHeader(t){t.createEl("h2",{text:"\u81EA\u5B9A\u4E49\u5E95\u90E8\u4FA7\u8FB9\u680F\u6309\u94AE"})}createDescription(t){t.createDiv("basic-vault-button-description").setText("\u5728\u6B64\u6DFB\u52A0\u548C\u7BA1\u7406\u60A8\u7684\u5E95\u90E8\u4FA7\u8FB9\u680F\u6309\u94AE. \u60A8\u53EF\u4EE5\u5728\u4FA7\u8FB9\u680F\u4E2D\u76F4\u63A5\u62D6\u62FD\u81EA\u5B9A\u4E49\u6309\u94AE\u6765\u91CD\u65B0\u6392\u5E8F (\u5185\u7F6E\u6309\u94AE\u4E0D\u652F\u6301\u62D6\u62FD).")}createEmptyState(t){let e=t.createDiv("basic-vault-button-empty");e.createEl("p",{text:"\u8FD8\u6CA1\u6709\u6DFB\u52A0\u4EFB\u4F55\u81EA\u5B9A\u4E49\u6309\u94AE"}),e.createEl("p",{text:'\u70B9\u51FB\u4E0B\u65B9\u7684"\u6DFB\u52A0\u65B0\u6309\u94AE"\u5F00\u59CB\u521B\u5EFA',cls:"setting-item-description"})}createButtonsList(t){t.createDiv("basic-vault-button-section-title").setText("\u5DF2\u914D\u7F6E\u7684\u6309\u94AE"),this.plugin.settings.customButtons.forEach((n,a)=>{this.createButtonSetting(t,n,a)})}createAddButton(t){t.createEl("button",{text:"\u6DFB\u52A0\u65B0\u6309\u94AE",cls:"basic-vault-button-add-btn"}).addEventListener("click",()=>{this.addCustomButton()})}addCustomButton(){let t=b();this.plugin.settings.customButtons.unshift(t),this.plugin.saveSettings(),this.plugin.initVaultButtons(),this.display()}removeButton(t){this.plugin.settings.customButtons.splice(t,1),this.plugin.saveSettings(),this.plugin.initVaultButtons(),this.display()}createButtonSetting(t,e,n){let a=t.createDiv("basic-vault-button-setting-item");this.createSettingHeader(a,n),this.createSettingContent(a,e,n)}createSettingHeader(t,e){let n=t.createDiv("basic-vault-button-setting-header");n.createEl("span",{text:`\u6309\u94AE ${e+1}`,cls:"basic-vault-button-setting-title"}),n.createDiv("basic-vault-button-setting-actions").createEl("button",{text:"\u5220\u9664",cls:"basic-vault-button-action-btn basic-vault-button-delete-btn"}).addEventListener("click",()=>this.removeButton(e))}createSettingContent(t,e,n){let a=t.createDiv("basic-vault-button-setting-content");this.createTooltipSetting(a,e),this.createIconSetting(a,e),this.createTypeSetting(a,e,n),this.createTypeSpecificSetting(a,e,n)}createTooltipSetting(t,e){new r.Setting(t).setName("\u6309\u94AE\u540D\u79F0").setDesc("\u9F20\u6807\u60AC\u505C\u65F6\u663E\u793A\u7684\u63D0\u793A\u6587\u5B57").addText(n=>n.setValue(e.tooltip).setPlaceholder("\u4F8B\u5982\uFF1A\u6253\u5F00\u65E5\u8BB0").onChange(async a=>{e.tooltip=a,await this.plugin.saveSettings(),this.plugin.initVaultButtons()}))}createIconSetting(t,e){new r.Setting(t).setName("\u56FE\u6807").setDesc("\u8F93\u5165 Lucide \u56FE\u6807\u540D\u79F0").addText(n=>n.setValue(e.icon).setPlaceholder("lucide-home").onChange(async a=>{e.icon=a,await this.plugin.saveSettings(),this.plugin.initVaultButtons()}))}createTypeSetting(t,e,n){new r.Setting(t).setName("\u6309\u94AE\u7C7B\u578B").setDesc("\u9009\u62E9\u6309\u94AE\u70B9\u51FB\u65F6\u6267\u884C\u7684\u64CD\u4F5C").addDropdown(a=>a.addOption("command","\u6267\u884C\u547D\u4EE4").addOption("file","\u6253\u5F00\u6587\u4EF6").addOption("url","\u6253\u5F00\u7F51\u5740").setValue(e.type).onChange(async o=>{e.type=o,await this.plugin.saveSettings(),this.display()}))}createTypeSpecificSetting(t,e,n){switch(e.type){case"command":this.createCommandSetting(t,e);break;case"file":this.createFileSetting(t,e);break;case"url":this.createUrlSetting(t,e);break}}createCommandSetting(t,e){new r.Setting(t).setName("\u76EE\u6807\u547D\u4EE4").setDesc("\u9009\u62E9\u8981\u6267\u884C\u7684\u547D\u4EE4").addSearch(n=>{n.setValue(e.command),n.setPlaceholder("\u4F8B\u5982\uFF1Afile-explorer:new-file");let a=new u(this.app,o=>{e.command=o.id,n.setValue(o.id),this.plugin.saveSettings()});n.inputEl.addEventListener("click",()=>{a.open()}),n.onChange(o=>{e.command=o,this.plugin.saveSettings()})})}createFileSetting(t,e){new r.Setting(t).setName("\u76EE\u6807\u6587\u4EF6").setDesc("\u9009\u62E9\u8981\u6253\u5F00\u7684\u6587\u4EF6").addSearch(n=>{n.setValue(e.file),n.setPlaceholder("\u4F8B\u5982\uFF1A\u65E5\u8BB0/2024.md");let a=new d(this.app,o=>{e.file=o.path,n.setValue(o.path),this.plugin.saveSettings()});n.inputEl.addEventListener("click",()=>{a.open()}),n.onChange(o=>{e.file=o,this.plugin.saveSettings()})})}createUrlSetting(t,e){new r.Setting(t).setName("\u7F51\u5740\u94FE\u63A5").setDesc("\u8F93\u5165\u8981\u6253\u5F00\u7684\u5B8C\u6574\u7F51\u5740").addText(n=>n.setValue(e.url).setPlaceholder("https://example.com").onChange(async a=>{e.url=a,await this.plugin.saveSettings()}))}};var g=class extends y.Plugin{constructor(){super(...arguments);this.styleEl=null}async onload(){await this.loadSettings(),this.injectStyles(),this.buttonManager=new c(this.app,this.handleSettingsChange.bind(this),this.reorderButtons.bind(this)),this.buttonManager.applyStyleSettings(),this.initVaultButtons(),this.addSettingTab(new p(this.app,this))}onunload(){this.styleEl&&(this.styleEl.remove(),this.styleEl=null),this.buttonManager&&this.buttonManager.destroy()}injectStyles(){let t=`
/* \u4E3B\u5BB9\u5668\u6837\u5F0F */
.basic-vault-button-header {
  margin-bottom: 16px;
}

.basic-vault-button-header h2 {
  margin: 0;
  color: var(--text-normal);
  font-size: 18px;
  font-weight: 600;
}

/* \u63CF\u8FF0\u6587\u672C\u6837\u5F0F */
.basic-vault-button-description {
  color: var(--text-muted);
  font-size: 13px;
  line-height: 1.4;
  margin-bottom: 16px;
  padding: 12px;
  background: var(--background-primary);
  border-radius: 6px;
  border-left: 2px solid var(--interactive-accent);
}

/* \u6DFB\u52A0\u6309\u94AE\u6837\u5F0F */
.basic-vault-button-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border: none;
  border-radius: 6px;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  transition: background 0.2s ease;
  margin: 16px 0;
}

.basic-vault-button-add-btn:hover {
  background: var(--interactive-accent-hover);
}

/* \u5206\u5272\u7EBF */
.basic-vault-button-divider {
  height: 1px;
  background: var(--background-modifier-border);
  margin: 16px 0;
}

/* \u90E8\u5206\u6807\u9898 */
.basic-vault-button-section-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-normal);
  margin-bottom: 12px;
}

/* \u7A7A\u72B6\u6001\u6837\u5F0F */
.basic-vault-button-empty {
  text-align: center;
  padding: 32px 20px;
  color: var(--text-muted);
  background: var(--background-secondary);
  border-radius: 8px;
  border: 1px solid var(--background-modifier-border);
  margin: 16px 0;
}

.basic-vault-button-empty p {
  margin: 8px 0;
  font-size: 14px;
}

.basic-vault-button-empty .setting-item-description {
  font-size: 12px;
  opacity: 0.7;
}

/* \u8BBE\u7F6E\u9879\u5361\u7247\u6837\u5F0F - \u7D27\u51D1\u7248\u672C */
.basic-vault-button-setting-item {
  background: var(--background-secondary);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 12px;
  border: 1px solid var(--background-modifier-border);
  transition: all 0.2s ease;
}

.basic-vault-button-setting-item:hover {
  border-color: var(--interactive-accent);
}

/* \u8BBE\u7F6E\u9879\u5934\u90E8 */
.basic-vault-button-setting-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--background-modifier-border);
}

.basic-vault-button-setting-title {
  font-weight: 600;
  color: var(--text-normal);
  font-size: 14px;
}

/* \u64CD\u4F5C\u6309\u94AE\u7EC4 */
.basic-vault-button-setting-actions {
  display: flex;
  gap: 4px;
}

.basic-vault-button-action-btn {
  padding: 4px 8px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  background: var(--background-primary);
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 11px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.basic-vault-button-action-btn:hover:not(:disabled) {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
}

.basic-vault-button-action-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.basic-vault-button-delete-btn {
  background: var(--color-red);
  border-color: var(--color-red);
  color: white;
  font-size: 11px;
}

.basic-vault-button-delete-btn:hover {
  background: var(--color-red-dark);
}

/* \u8BBE\u7F6E\u5185\u5BB9\u533A\u57DF */
.basic-vault-button-setting-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* \u8BBE\u7F6E\u9879\u6837\u5F0F\u4F18\u5316 */
.basic-vault-button-setting-item .setting-item {
  border-top: none;
  padding-top: 0;
  padding-bottom: 0;
  background: transparent;
}

.basic-vault-button-setting-item .setting-item-info {
  margin-bottom: 4px;
}

.basic-vault-button-setting-item .setting-item-name {
  font-weight: 600;
  color: var(--text-normal);
  font-size: 13px;
  margin-bottom: 2px;
}

.basic-vault-button-setting-item .setting-item-description {
  color: var(--text-muted);
  font-size: 11px;
  line-height: 1.3;
}

.basic-vault-button-setting-item .setting-item-control {
  margin-top: 4px;
}

/* \u8F93\u5165\u6846\u548C\u4E0B\u62C9\u83DC\u5355\u6837\u5F0F\u4F18\u5316 */
.basic-vault-button-setting-item input[type="text"],
.basic-vault-button-setting-item .dropdown {
  background: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 6px 8px;
  font-size: 13px;
  transition: all 0.2s ease;
  min-height: 28px;
}

.basic-vault-button-setting-item input[type="text"]:focus,
.basic-vault-button-setting-item .dropdown:focus {
  border-color: var(--interactive-accent);
  box-shadow: 0 0 0 1px rgba(var(--interactive-accent-rgb), 0.1);
  outline: none;
}

/* \u547D\u4EE4\u641C\u7D22\u6837\u5F0F */
.command-search-container {
  position: relative;
  width: 100%;
}

.command-search-button {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border: none;
  border-radius: 4px;
  padding: 4px 8px;
  cursor: pointer;
  font-size: 11px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.command-search-button:hover {
  background: var(--interactive-accent-hover);
}

.command-search-input {
  padding-right: 70px !important;
  width: 100%;
}

/* \u62D6\u62FD\u6392\u5E8F\u6837\u5F0F */
.custom-ribbon-button {
  transition: all 0.2s ease;
  position: relative;
}

.custom-ribbon-button:hover {
  background-color: var(--background-modifier-hover);
}

.custom-ribbon-button.dragging {
  opacity: 0.5;
}

.custom-ribbon-button.drag-over {
  border: 2px dashed var(--interactive-accent);
  background-color: var(--background-modifier-hover);
}

/* \u54CD\u5E94\u5F0F\u8BBE\u8BA1 */
@media (max-width: 768px) {
  .basic-vault-button-setting-header {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }
  
  .basic-vault-button-setting-actions {
    align-self: flex-end;
  }
  
  .basic-vault-button-add-btn {
    width: 100%;
    justify-content: center;
  }
  
  .basic-vault-button-setting-item {
    padding: 12px;
    margin-bottom: 8px;
  }
  
  .basic-vault-button-empty {
    padding: 24px 16px;
    margin: 12px 0;
  }
}

/* \u6697\u8272\u6A21\u5F0F\u4F18\u5316 */
.theme-dark .basic-vault-button-setting-item {
  background: var(--background-secondary);
}

.theme-dark .basic-vault-button-description {
  background: var(--background-secondary);
}
		`;this.styleEl=document.createElement("style"),this.styleEl.textContent=t,document.head.appendChild(this.styleEl)}async loadSettings(){this.settings=Object.assign({},h,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}initVaultButtons(){this.buttonManager&&this.buttonManager.initVaultButtons(this.settings.customButtons)}handleSettingsChange(){this.saveSettings(),this.initVaultButtons()}reorderButtons(t,e){if(t===e)return;let[n]=this.settings.customButtons.splice(t,1);this.settings.customButtons.splice(e,0,n),this.saveSettings(),this.initVaultButtons()}};
